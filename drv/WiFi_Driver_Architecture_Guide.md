# WiFi é©±åŠ¨æ¶æ„å…¨é¢åˆ†ææŒ‡å— - æ€»è§ˆ

## æ–‡æ¡£å¯¼èˆª

æœ¬æ–‡æ¡£ç³»åˆ—å…¨é¢åˆ†æ WiFi é©±åŠ¨æ¶æ„ï¼Œé€‚åˆæ–°å…¥é—¨å·¥ç¨‹å¸ˆå¿«é€Ÿç†è§£é©±åŠ¨ã€‚

### æ–‡æ¡£ç»“æ„

| æ–‡æ¡£ | ä¸»é¢˜ | å…³é”®å†…å®¹ |
|------|------|----------|
| [Part 1](WiFi_Driver_Guide_Part1.md) | é©±åŠ¨åŸºç¡€æ¶æ„ | åŠ è½½æµç¨‹ã€æ€»çº¿å±‚ã€èŠ¯ç‰‡é©±åŠ¨ã€è®¾å¤‡æ ‘ã€ç”µæºç®¡ç†ã€SER |
| [Part 2](WiFi_Driver_Guide_Part2.md) | æ¨¡å—é€šä¿¡ | MCU æ¶æ„ã€å‘½ä»¤/äº‹ä»¶ã€WED åŠ é€Ÿã€RROã€PCIe/DMA |
| [Part 3](WiFi_Driver_Guide_Part3.md) | æ•°æ®åŒ…è·¯å¾„ | TX/RX æµç¨‹ã€Ring ç®¡ç†ã€NAPIã€é›¶æ‹·è´ã€SKB ç®¡ç† |
| [Part 4](WiFi_Driver_Guide_Part4.md) | æ— çº¿å¸§å¤„ç† | è®¤è¯/å…³è”ã€ç®¡ç†å¸§ã€Action å¸§ã€Block Ackã€RTS/CTS |
| [Part 5](WiFi_Driver_Guide_Part5.md) | é«˜çº§ç‰¹æ€§ | MLOã€VLANã€ç»„æ’­ã€WiFi 6/7 ç‰¹æ€§ã€TWT |
| [Part 6](WiFi_Driver_Guide_Part6.md) | è°ƒè¯•å’Œå¼€å‘ | æ—¥å¿—ã€è·Ÿè¸ªã€å´©æºƒåˆ†æã€æ€§èƒ½ä¼˜åŒ–ã€æœ€ä½³å®è·µ |

### å¿«é€Ÿç´¢å¼•

#### æŒ‰ä¸»é¢˜æŸ¥æ‰¾
- **é©±åŠ¨åŠ è½½**: Part 1 Â§ 1-2
- **æ€»çº¿é©±åŠ¨**: Part 1 Â§ 3, Part 2 Â§ 4
- **MCU é€šä¿¡**: Part 2 Â§ 1-3
- **æ•°æ®å‘é€**: Part 3 Â§ 1-2
- **æ•°æ®æ¥æ”¶**: Part 3 Â§ 3-4
- **æ— çº¿åè®®**: Part 4 Â§ 1-5
- **MLO å¤šé“¾è·¯**: Part 5 Â§ 1
- **è°ƒè¯•æ–¹æ³•**: Part 6 Â§ 8-9
- **æ€§èƒ½ä¼˜åŒ–**: Part 6 Â§ 10.6

#### æŒ‰è§’è‰²æŸ¥æ‰¾
- **æ–°æ‰‹å…¥é—¨**: Part 1 â†’ Part 3 â†’ Part 6 Â§ 10.1
- **æ•°æ®è·¯å¾„å¼€å‘**: Part 2 Â§ 5 â†’ Part 3
- **æ— çº¿åè®®å¼€å‘**: Part 4 â†’ Part 5
- **æ€§èƒ½ä¼˜åŒ–**: Part 2 Â§ 5 â†’ Part 3 Â§ 5 â†’ Part 6 Â§ 10.6
- **é—®é¢˜æ’æŸ¥**: Part 6 Â§ 8-9

---

## æ¶æ„æ¦‚è§ˆ

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç©ºé—´ (User Space)                      â”‚
â”‚  hostapd / wpa_supplicant / iw / iwpriv / iperf3                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ ioctl / netlink / nl80211
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Linux å†…æ ¸ç½‘ç»œæ ˆ (Kernel)                      â”‚
â”‚  net/core (SKB) â†’ net/wireless (cfg80211) â†’ net/mac80211        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ net_device_ops
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MT WiFi åè®®æ ˆå±‚ (mt_wifi/)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AP/STA æ¨¡å¼ â”‚ MLME â”‚ BA â”‚ åŠ å¯† â”‚ QoS â”‚ MLO â”‚ ç»„æ’­        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ•°æ®åŒ…å¤„ç†: cmm_data.c (TX/RX è·¯å¾„)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ MAC æ¥å£å±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ç¡¬ä»¶æŠ½è±¡å±‚ (wlan_hwifi/)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Token ç®¡ç† â”‚ Ring ç®¡ç† â”‚ DMA æ˜ å°„ â”‚ ä¸­æ–­å¤„ç†            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MCU é€šä¿¡: WM (ç®¡ç†) / WA (åŠ é€Ÿ) / WO (å¸è½½) / DSP        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ èŠ¯ç‰‡é©±åŠ¨: MT7990 / MT7992 (FMAC/BMAC)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ æ€»çº¿æŠ½è±¡å±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ€»çº¿é©±åŠ¨: PCI / AXI / USB / SDIO                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DMA Engine â”‚ ä¸­æ–­æ§åˆ¶ â”‚ å¯„å­˜å™¨è®¿é—® â”‚ ç”µæºç®¡ç†           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ ç¡¬ä»¶æ¥å£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç¡¬ä»¶åŠ é€Ÿå¼•æ“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ WED (TX/RX åŠ é€Ÿ) â”‚ RRO (é‡æ’åº) â”‚ NPU (ç½‘ç»œå¤„ç†)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              WiFi èŠ¯ç‰‡ (MT7990/MT7992)                           â”‚
â”‚  å›ºä»¶: WM MCU / WA MCU / WO MCU / DSP MCU                        â”‚
â”‚  ç¡¬ä»¶: MAC / PHY / RF / åŠ å¯†å¼•æ“                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æ¨¡å—è¯´æ˜

#### 1. åè®®æ ˆå±‚ (mt_wifi/)
- **èŒè´£**: å®ç° WiFi åè®®æ ˆï¼Œå¤„ç†æ— çº¿ç‰¹æ€§
- **å…³é”®æ¨¡å—**:
  - AP/STA æ¨¡å¼ç®¡ç†
  - MLME çŠ¶æ€æœº
  - è®¤è¯/å…³è”/åŠ å¯†
  - BA (Block Ack) ç®¡ç†
  - QoS å’Œæµé‡æ§åˆ¶
  - MLO å¤šé“¾è·¯æ“ä½œ
- **è¯¦è§**: Part 4, Part 5

#### 2. ç¡¬ä»¶æŠ½è±¡å±‚ (wlan_hwifi/)
- **èŒè´£**: ç¡¬ä»¶æ“ä½œæŠ½è±¡ï¼Œä¸å›ºä»¶é€šä¿¡
- **å…³é”®æ¨¡å—**:
  - Token ç®¡ç† (é›¶æ‹·è´)
  - TX/RX Ring ç®¡ç†
  - MCU å‘½ä»¤/äº‹ä»¶
  - èŠ¯ç‰‡é©±åŠ¨ (MT7990/MT7992)
  - DMA æ˜ å°„å’Œä¼ è¾“
- **è¯¦è§**: Part 1, Part 2, Part 3

#### 3. æ€»çº¿å±‚
- **èŒè´£**: æ€»çº¿é€šä¿¡æŠ½è±¡
- **æ”¯æŒæ€»çº¿**: PCI, AXI, USB, SDIO
- **å…³é”®åŠŸèƒ½**:
  - å¯„å­˜å™¨è¯»å†™
  - DMA ä¼ è¾“
  - ä¸­æ–­å¤„ç†
  - ç”µæºç®¡ç†
- **è¯¦è§**: Part 1 Â§ 3, Part 2 Â§ 4

#### 4. ç¡¬ä»¶åŠ é€Ÿ
- **WED (Wireless Ethernet Dispatch)**:
  - TX/RX ç¡¬ä»¶åŠ é€Ÿ
  - ååé‡æå‡ 3-5 å€
  - CPU è´Ÿè½½é™ä½ 50-70%
- **RRO (RX Reordering Offload)**:
  - ç¡¬ä»¶ BA é‡æ’åº
  - é™ä½ CPU è´Ÿè½½
  - å‡å°‘å»¶è¿Ÿ
- **è¯¦è§**: Part 2 Â§ 5

---

## æ•°æ®æµå‘

### TX (å‘é€) è·¯å¾„

```
åº”ç”¨å±‚æ•°æ®
    â†“
net_device_ops->ndo_start_xmit()
    â†“
mt_wifi: cmm_data.c (åè®®æ ˆå¤„ç†)
    â†“ æ·»åŠ  WiFi å¤´ã€åŠ å¯†ã€QoS
wlan_hwifi: tk_mgmt.c (Token åˆ†é…)
    â†“ åˆ†é… Tokenï¼Œæ„å»º TXD
wlan_hwifi: bus TX (DMA æ˜ å°„)
    â†“ DMA mapï¼Œå†™å…¥ TX Ring
ç¡¬ä»¶: WED TX åŠ é€Ÿ (å¯é€‰)
    â†“ ç¡¬ä»¶å¤„ç† TXD
å›ºä»¶: WM MCU å¤„ç†
    â†“ è°ƒåº¦å‘é€
ç¡¬ä»¶: MAC/PHY å‘é€
    â†“
æ— çº¿ä¿¡å· â†’ ç©ºä¸­æ¥å£
```

**è¯¦è§**: Part 3 Â§ 1-2

### RX (æ¥æ”¶) è·¯å¾„

```
æ— çº¿ä¿¡å· â† ç©ºä¸­æ¥å£
    â†“
ç¡¬ä»¶: MAC/PHY æ¥æ”¶
    â†“
å›ºä»¶: WM MCU å¤„ç†
    â†“ å†™å…¥ RX Ring
ç¡¬ä»¶: RRO é‡æ’åº (å¯é€‰)
    â†“ BA é‡æ’åº
ç¡¬ä»¶: WED RX åŠ é€Ÿ (å¯é€‰)
    â†“ ç¡¬ä»¶å¤„ç† RXD
ä¸­æ–­: RX å®Œæˆä¸­æ–­
    â†“
wlan_hwifi: NAPI poll
    â†“ ä» RX Ring è¯»å–
wlan_hwifi: Token é‡Šæ”¾
    â†“ è§£æ RXDï¼Œé‡Šæ”¾ Token
mt_wifi: cmm_data.c (åè®®æ ˆå¤„ç†)
    â†“ è§£å¯†ã€å» WiFi å¤´
netif_receive_skb()
    â†“
å†…æ ¸ç½‘ç»œæ ˆ
    â†“
åº”ç”¨å±‚æ¥æ”¶
```

**è¯¦è§**: Part 3 Â§ 3-4

---

## å…³é”®æŠ€æœ¯

### 1. Token æœºåˆ¶ (é›¶æ‹·è´)
- **åŸç†**: Token ä½œä¸º SKB å’Œç¡¬ä»¶æè¿°ç¬¦çš„æ¡¥æ¢
- **ä¼˜åŠ¿**: é¿å…å†…å­˜æ‹·è´ï¼Œæé«˜æ€§èƒ½
- **å®ç°**: `wlan_hwifi/tk_mgmt.c`
- **è¯¦è§**: Part 3 Â§ 2.3

### 2. NAPI è½®è¯¢
- **åŸç†**: ä¸­æ–­ + è½®è¯¢æ··åˆæ¨¡å¼
- **ä¼˜åŠ¿**: é™ä½ä¸­æ–­å¼€é”€ï¼Œæé«˜ååé‡
- **é…ç½®**: NAPI weight å¯è°ƒ
- **è¯¦è§**: Part 3 Â§ 4.2

### 3. WED ç¡¬ä»¶åŠ é€Ÿ
- **TX åŠ é€Ÿ**: ç¡¬ä»¶æ„å»º TXDï¼ŒDMA ä¼ è¾“
- **RX åŠ é€Ÿ**: ç¡¬ä»¶è§£æ RXDï¼ŒDMA ä¼ è¾“
- **æ€§èƒ½**: ååé‡æå‡ 3-5 å€
- **è¯¦è§**: Part 2 Â§ 5.1-5.2

### 4. RRO é‡æ’åºå¸è½½
- **åŸç†**: ç¡¬ä»¶å®ç° BA é‡æ’åº
- **ä¼˜åŠ¿**: é™ä½ CPU è´Ÿè½½ï¼Œå‡å°‘å»¶è¿Ÿ
- **å®ç°**: ç¡¬ä»¶ + å›ºä»¶ååŒ
- **è¯¦è§**: Part 2 Â§ 5.3

### 5. MLO å¤šé“¾è·¯
- **åŸç†**: åŒæ—¶ä½¿ç”¨å¤šä¸ªé¢‘æ®µé“¾è·¯
- **æ¨¡å¼**: EMLSR (å•å°„é¢‘) / EMLMR (å¤šå°„é¢‘)
- **ä¼˜åŠ¿**: æ›´é«˜ååé‡ï¼Œæ›´ä½å»¶è¿Ÿ
- **è¯¦è§**: Part 5 Â§ 1

---

## å­¦ä¹ è·¯å¾„

### æ–°æ‰‹å…¥é—¨ (2-3 å‘¨)

**ç¬¬ 1 å‘¨: åŸºç¡€ç†è§£**
- [ ] é˜…è¯» Part 1: é©±åŠ¨åŠ è½½æµç¨‹
- [ ] ç†è§£æ ¸å¿ƒæ•°æ®ç»“æ„
- [ ] å­¦ä¹ æ€»çº¿å±‚æŠ½è±¡
- [ ] å®è·µ: ç¼–è¯‘å’ŒåŠ è½½é©±åŠ¨

**ç¬¬ 2 å‘¨: æ•°æ®è·¯å¾„**
- [ ] é˜…è¯» Part 3: TX/RX è·¯å¾„
- [ ] ç†è§£ Token æœºåˆ¶
- [ ] å­¦ä¹  NAPI è½®è¯¢
- [ ] å®è·µ: ä½¿ç”¨ iperf3 æµ‹è¯•

**ç¬¬ 3 å‘¨: è°ƒè¯•æ–¹æ³•**
- [ ] é˜…è¯» Part 6: è°ƒè¯•å’Œè¯Šæ–­
- [ ] å­¦ä¹ æ—¥å¿—ç³»ç»Ÿ
- [ ] å®è·µ: ä½¿ç”¨ debugfs å’Œ ftrace
- [ ] æ’æŸ¥ä¸€ä¸ªç®€å•é—®é¢˜

### è¿›é˜¶å­¦ä¹  (4-6 å‘¨)

**ç¬¬ 4-5 å‘¨: å›ºä»¶é€šä¿¡**
- [ ] é˜…è¯» Part 2: MCU æ¶æ„
- [ ] ç†è§£å‘½ä»¤/äº‹ä»¶æœºåˆ¶
- [ ] å­¦ä¹  WED åŠ é€ŸåŸç†
- [ ] å®è·µ: åˆ†æå›ºä»¶æ—¥å¿—

**ç¬¬ 6-7 å‘¨: æ— çº¿åè®®**
- [ ] é˜…è¯» Part 4: æ— çº¿å¸§å¤„ç†
- [ ] ç†è§£ MLME çŠ¶æ€æœº
- [ ] å­¦ä¹  BA æœºåˆ¶
- [ ] å®è·µ: æŠ“åŒ…åˆ†æ

**ç¬¬ 8-9 å‘¨: é«˜çº§ç‰¹æ€§**
- [ ] é˜…è¯» Part 5: MLO å’Œé«˜çº§ç‰¹æ€§
- [ ] ç†è§£ MLO åŸç†
- [ ] å­¦ä¹  VLAN å’Œç»„æ’­
- [ ] å®è·µ: é…ç½® MLO

### ä¸“å®¶çº§ (æŒç»­)

**æ€§èƒ½ä¼˜åŒ–**
- [ ] æ·±å…¥ç†è§£ç¡¬ä»¶åŠ é€Ÿ
- [ ] å­¦ä¹ æ€§èƒ½åˆ†æå·¥å…·
- [ ] ä¼˜åŒ–çƒ­ç‚¹ä»£ç 
- [ ] è°ƒæ•´å…³é”®å‚æ•°

**é—®é¢˜æ’æŸ¥**
- [ ] æŒæ¡å´©æºƒåˆ†æ
- [ ] å­¦ä¹ å›ºä»¶è°ƒè¯•
- [ ] ç§¯ç´¯é—®é¢˜æ¡ˆä¾‹
- [ ] å»ºç«‹çŸ¥è¯†åº“

---

## å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### é©±åŠ¨æ“ä½œ
```bash
# åŠ è½½é©±åŠ¨
modprobe mt_wifi

# å¸è½½é©±åŠ¨
rmmod mt_wifi

# æŸ¥çœ‹é©±åŠ¨ä¿¡æ¯
modinfo mt_wifi

# æŸ¥çœ‹åŠ è½½æ—¥å¿—
dmesg | grep mt_wifi
```

### æ¥å£æ“ä½œ
```bash
# å¯åŠ¨æ¥å£
ifconfig ra0 up

# é…ç½® IP
ifconfig ra0 192.168.1.1 netmask 255.255.255.0

# æŸ¥çœ‹æ— çº¿ä¿¡æ¯
iwconfig ra0

# æŸ¥çœ‹ç»Ÿè®¡
ifconfig ra0
```

### è°ƒè¯•å‘½ä»¤
```bash
# è®¾ç½®æ—¥å¿—çº§åˆ«
echo 5 > /proc/net/mt_wifi/debug_level

# æŸ¥çœ‹ Token ç»Ÿè®¡
cat /sys/kernel/debug/hwifi/token/stats

# æŸ¥çœ‹ MCU çŠ¶æ€
cat /sys/kernel/debug/hwifi/mcu/status

# è§¦å‘ Core Dump
iwpriv ra0 set trig_core_dump=1
```

### æ€§èƒ½æµ‹è¯•
```bash
# TCP ååé‡æµ‹è¯•
iperf3 -c server_ip -t 60

# UDP ååé‡æµ‹è¯•
iperf3 -c server_ip -u -b 1000M -t 60

# å»¶è¿Ÿæµ‹è¯•
ping -i 0.001 -c 10000 server_ip

# CPU æ€§èƒ½åˆ†æ
perf top -p $(pgrep -f mt_wifi)
```

---

## å…³é”®æ–‡ä»¶ç´¢å¼•

### é©±åŠ¨å…¥å£
- `wlan_hwifi/main.c` - æ¨¡å—å…¥å£
- `mt_wifi/os/linux/rt_main_dev.c` - ç½‘ç»œè®¾å¤‡æ³¨å†Œ

### æ•°æ®è·¯å¾„
- `mt_wifi/common/cmm_data.c` - åè®®æ ˆæ•°æ®å¤„ç†
- `wlan_hwifi/tk_mgmt.c` - Token ç®¡ç†
- `wlan_hwifi/bus/pci/pci.c` - PCI TX/RX

### MCU é€šä¿¡
- `wlan_hwifi/mcu/mcu.c` - MCU æ¡†æ¶
- `wlan_hwifi/mcu/mcu_wm.c` - WM MCU
- `wlan_hwifi/mcu/mcu_wa.c` - WA MCU

### æ— çº¿åè®®
- `mt_wifi/common/mlme.c` - MLME çŠ¶æ€æœº
- `mt_wifi/common/bcn.c` - Beacon å¤„ç†
- `mt_wifi/common/ba_action.c` - Block Ack

### é«˜çº§ç‰¹æ€§
- `wlan_hwifi/mlo/` - MLO å®ç°
- `mt_wifi/common/igmp_snoop.c` - IGMP Snooping
- `mt_wifi/common/a4_conn.c` - 4 åœ°å€æ¨¡å¼

### è°ƒè¯•å·¥å…·
- `mt_wifi/os/linux/trace.c` - Trace æ”¯æŒ
- `mt_wifi/ap/ap_cfg.c` - é…ç½®å’Œè°ƒè¯•å‘½ä»¤

---

## æ€§èƒ½å‚è€ƒ

### ååé‡ (ç†è®ºå€¼)
| é…ç½® | æ— åŠ é€Ÿ | WED åŠ é€Ÿ | WED+RRO |
|------|--------|----------|---------|
| 1x1 HE80 | ~800 Mbps | ~1.2 Gbps | ~1.5 Gbps |
| 2x2 HE160 | ~2.4 Gbps | ~4.0 Gbps | ~5.0 Gbps |
| 4x4 EHT320 | ~6.0 Gbps | ~10 Gbps | ~12 Gbps |

### CPU ä½¿ç”¨ç‡
| ååé‡ | æ— åŠ é€Ÿ | WED åŠ é€Ÿ |
|--------|--------|----------|
| 1 Gbps | ~60% | ~20% |
| 5 Gbps | ~100% | ~50% |
| 10 Gbps | N/A | ~80% |

### å»¶è¿Ÿ
| åœºæ™¯ | å»¶è¿Ÿ |
|------|------|
| ç©ºé—² ping | < 1 ms |
| æ»¡è´Ÿè½½ ping | < 5 ms |
| MLO é“¾è·¯åˆ‡æ¢ | < 10 ms |

---

## å¸¸è§é—®é¢˜

### Q1: é©±åŠ¨åŠ è½½å¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥å›ºä»¶æ–‡ä»¶ã€ç¡¬ä»¶è¯†åˆ«ã€å†…æ ¸ç‰ˆæœ¬ã€‚è¯¦è§ Part 6 Â§ 9.1

### Q2: ååé‡ä½ï¼Ÿ
**A**: æ£€æŸ¥ WED åŠ é€Ÿã€NAPI å‚æ•°ã€CPU æ€§èƒ½ã€‚è¯¦è§ Part 6 Â§ 9.3

### Q3: å¦‚ä½•è°ƒè¯•å´©æºƒï¼Ÿ
**A**: ä½¿ç”¨ crash å·¥å…·åˆ†æ vmcoreã€‚è¯¦è§ Part 6 Â§ 8.7

### Q4: MLO å¦‚ä½•é…ç½®ï¼Ÿ
**A**: å‚è€ƒ Part 5 Â§ 1ï¼Œéœ€è¦å›ºä»¶å’Œé©±åŠ¨æ”¯æŒã€‚

### Q5: å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ
**A**: å¯ç”¨ç¡¬ä»¶åŠ é€Ÿã€è°ƒæ•´å‚æ•°ã€ä¼˜åŒ–ä»£ç ã€‚è¯¦è§ Part 6 Â§ 10.6

---

## èµ„æºé“¾æ¥

### æ ‡å‡†æ–‡æ¡£
- IEEE 802.11-2020: WiFi åŸºç¡€æ ‡å‡†
- IEEE 802.11ax-2021: WiFi 6
- IEEE 802.11be: WiFi 7 (è‰æ¡ˆ)

### Linux æ–‡æ¡£
- Documentation/networking/
- Documentation/DMA-API.txt
- net/wireless/ (cfg80211)
- net/mac80211/

### å·¥å…·
- iw: æ— çº¿é…ç½®
- hostapd: AP å®ˆæŠ¤è¿›ç¨‹
- wireshark: æŠ“åŒ…åˆ†æ
- iperf3: æ€§èƒ½æµ‹è¯•

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2026-02-09  
**ç»´æŠ¤è€…**: Kiro AI Assistant

**ç¥æ‚¨å­¦ä¹ æ„‰å¿«ï¼** ğŸ“
